<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>The Boring Cat Blog</title>
  <style>
    body {
      margin: 0;
      font-family: "Georgia", serif;
      background: #f4f1ec;
      color: #333;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding-top: 40px;
      height: 200vh;
    }

    .blog-container {
      background: #fffdf8;
      width: 600px;
      padding: 32px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
      border-radius: 8px;
      position: relative;
    }

    h1 {
      margin-top: 0;
      font-size: 2.2rem;
      text-align: center;
    }

    .subtitle {
      text-align: center;
      font-size: 0.9rem;
      color: #777;
      margin-bottom: 24px;
    }

    .post-title {
      font-size: 1.3rem;
      margin-bottom: 8px;
    }

    .post-meta {
      font-size: 0.8rem;
      color: #999;
      margin-bottom: 16px;
    }

    .post-content {
      font-size: 1rem;
      line-height: 1.6;
      margin-bottom: 24px;
    }

    .play-button,
    .post-button {
      display: block;
      width: 100%;
      padding: 14px;
      font-size: 1.1rem;
      font-weight: bold;
      background: #2e2e2e;
      color: #fff;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin-bottom: 16px;
      position: relative;
      z-index: 2;
    }

    .side-box, .money-label {
      padding: 10px 14px;
      border-radius: 8px;
      font-weight: bold;
      text-align: center;
      min-width: 100px;
    }

    .money-label {
      background: #111;
      color: #fff;
    }

    #moneyAmount {
      color: #f5c542; /* gold color */
    }

    .side-box {
      background: #000;
      color: #f5c542;
    }

    #gameUI {
      display: none;
      margin-top: 80px;
    }

    .money-ui {
      position: fixed;
      top: 16px;
      right: 24px;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 8px;
      z-index: 9999;
    }

    .money-float {
      position: absolute;
      color: green;
      font-weight: bold;
      animation: floatUp 1.5s forwards;
      z-index: 10000;
    }

    @keyframes floatUp {
      0% { opacity: 1; transform: translateY(0); }
      100% { opacity: 0; transform: translateY(-40px); }
    }
  </style>
</head>
<body>
  <div class="money-ui" id="moneyUI">
    <div class="money-label">ðŸ’° <span id="moneyAmount">$0.00</span></div>
    <div class="side-box">Upgrades</div>
    <div class="side-box">Shop</div>
  </div>

  <div class="blog-container" id="blogContainer">
    <h1>The Boring Cat Blog</h1>
    <div class="subtitle">sleep â€¢ suffering â€¢ small amounts of money</div>

    <button class="post-button" id="firstPostButton" data-mode="first">âœŽ Post Blog</button>

  </div>

  <audio id="kachingSound" src="cash-register-kaching-376867 (1).mp3"></audio>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      let money = 0;
      let isTyping = false;

      const moneyUI = document.getElementById("moneyUI");
      const moneyAmount = document.getElementById("moneyAmount");
      const kaching = document.getElementById("kachingSound");
      const blogContainer = document.getElementById("blogContainer");

      function earnMoney(amount) {
        money += amount;
        moneyAmount.textContent = `$${money.toFixed(2)}`;
        moneyUI.style.display = "flex";
        kaching.currentTime = 0;
        kaching.play();
      }

      async function typeBlog(post, titleText, bodyText, metaText) {
        const title = document.createElement("div");
        title.className = "post-title";
        const meta = document.createElement("div");
        meta.className = "post-meta";
        meta.textContent = metaText;
        const content = document.createElement("div");
        content.className = "post-content";

        const caret = document.createElement("span");
        caret.className = "caret";

        post.appendChild(title);
        post.appendChild(meta);
        post.appendChild(content);
        blogContainer.appendChild(post);

        setTimeout(() => post.scrollIntoView({ behavior: "smooth", block: "start" }), 200);

        async function typeText(element, text) {
          element.textContent = "";
          element.appendChild(caret);
          for (let char of text) {
            caret.remove();
            element.textContent += char;
            element.appendChild(caret);
            await new Promise(r => setTimeout(r, 30));
          }
          caret.remove();
        }

        await typeText(title, titleText);
        await typeText(content, bodyText);
      }

      blogContainer.addEventListener("click", async (e) => {
        if (!e.target.classList.contains("post-button")) return;
        const postButton = e.target;
        if (isTyping) return;

        isTyping = true;
        postButton.textContent = "Writingâ€¦";

        const post = document.createElement("div");
        post.className = "post";

        if (postButton.dataset.mode === "first") {
          const titleText = "Where to Find the Best Catnip (Trust Me)";
          const bodyText = "Everyone keeps asking me where I get my catnip. The truth is I donâ€™t. I once saw some behind the convenience store but there was a dog there and I panicked. If you absolutely must try, I recommend checking under couches, in forgotten drawers, or stealing it emotionally from other cats. Do not ask me how that works. I am tired.";
          await typeBlog(post, titleText, bodyText, "Posted by Cat â€¢ 3:12 AM â€¢ no comments");
          earnMoney(0.2);
          postButton.textContent = "Posted";
          postButton.disabled = true;

          const newWriteButton = document.createElement("button");
          newWriteButton.className = "post-button";
          newWriteButton.textContent = "âœŽ Write New Blog";
          newWriteButton.dataset.mode = "write";
          newWriteButton.dataset.final = "true"; // mark as final
          newWriteButton.disabled = false;
          blogContainer.appendChild(newWriteButton);
          newWriteButton.scrollIntoView({ behavior: "smooth", block: "end" });
        } else if (postButton.dataset.mode === "write") {
          const titleText = "Where I Sat Today";
          const bodyText = "Today I sat on the back of the couch where the fabric is a little thinner and smells like the sun. It was uncomfortable at first, but I stayed anyway because leaving would mean admitting I chose wrong. After a while, the discomfort faded and I forgot why I was there, which is usually how things work out for me.";
          const metaText = "Posted by Cat â€¢ 3:41 AM â€¢ no comments";
          await typeBlog(post, titleText, bodyText, metaText);
          postButton.textContent = "âœŽ Post Blog";
          postButton.dataset.mode = "post";
        } else if (postButton.dataset.mode === "post") {
          earnMoney(0.2);
          postButton.textContent = "Posted";
          postButton.disabled = true;

          const newWriteButton = document.createElement("button");
          newWriteButton.className = "post-button";
          newWriteButton.textContent = "âœŽ Write New Blog";
          newWriteButton.dataset.mode = "write";
          // Disable final button immediately
          if (postButton.dataset.final === "true") {
            newWriteButton.disabled = true;
          }
          blogContainer.appendChild(newWriteButton);
          newWriteButton.scrollIntoView({ behavior: "smooth", block: "end" });
        }

        isTyping = false;
      });
    });
  </script>
</body>
</html>
